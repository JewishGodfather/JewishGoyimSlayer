<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shooting Zombie Humans</title>
  <style>
    canvas {
      background-image: url('background.jpg');
      background-size: cover;
      display: block;
      margin: 0 auto;
    }
    body {
      margin: 0;
      padding: 0;
    }
    .kill-counter {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-size: 30px;
      font-family: Arial, sans-serif;
      z-index: 10; /* Ensure it stays on top of the canvas */
    }
  </style>
</head>
<body>
  <!-- Kill counter added here -->
  <div class="kill-counter">Kills: 0</div>
  <canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const killCounterElement = document.querySelector(".kill-counter");

let zombies = [];
let humans = [];
let particles = [];
let points = 0; // Track the points (positive for zombies, negative for humans)

class Zombie {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.size = 50;
    this.speed = 0.5 + Math.random() * 0.5;
    this.direction = Math.random() * Math.PI * 2;
    this.health = 100;
  }

  move() {
    this.x += Math.cos(this.direction) * this.speed;
    this.y += Math.sin(this.direction) * this.speed;

    // Bounce off walls
    if (this.x < 50 || this.x > canvas.width - 50) this.direction = Math.PI - this.direction;
    if (this.y < 50 || this.y > canvas.height - 150) this.direction = -this.direction;
  }

  draw() {
    // Zombie drawing logic remains unchanged
    // (draw head, body, etc.)
  }

  isHit(x, y) {
    return Math.hypot(this.x - x, this.y - y) < this.size;
  }
}

class Human {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.size = 50;
    this.speed = 0.5 + Math.random() * 0.5;
    this.direction = Math.random() * Math.PI * 2;
  }

  move() {
    this.x += Math.cos(this.direction) * this.speed;
    this.y += Math.sin(this.direction) * this.speed;

    // Bounce off walls
    if (this.x < 50 || this.x > canvas.width - 50) this.direction = Math.PI - this.direction;
    if (this.y < 50 || this.y > canvas.height - 150) this.direction = -this.direction;
  }

  draw() {
    // Drawing a simple human figure (could be a simple circle)
    ctx.fillStyle = "#FFDDC1"; // Human skin color
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size / 2, 0, Math.PI * 2);
    ctx.fill();

    ctx.fillStyle = "#000"; // Clothing color (simple black for illustration)
    ctx.fillRect(this.x - 15, this.y + 20, 30, 40); // Draw body
  }

  isHit(x, y) {
    return Math.hypot(this.x - x, this.y - y) < this.size / 2;
  }
}

class BloodParticle {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.vx = Math.random() * 4 - 2;  // Random horizontal speed
    this.vy = Math.random() * 4 - 2;  // Random vertical speed
    this.life = 20; // Blood particle life duration
    this.size = Math.random() * 5 + 2; // Random size for more natural look
    this.color = "red"; // Blood color
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.life--; // Decrease life over time
  }

  draw() {
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }
}

function spawnZombie() {
  const marginX = 100;
  const marginY = 150;
  const x = marginX + Math.random() * (canvas.width - 2 * marginX);
  const y = marginY + Math.random() * (canvas.height - 2 * marginY);
  zombies.push(new Zombie(x, y));
}

function spawnHuman() {
  const marginX = 100;
  const marginY = 150;
  const x = marginX + Math.random() * (canvas.width - 2 * marginX);
  const y = marginY + Math.random() * (canvas.height - 2 * marginY);
  humans.push(new Human(x, y));
}

function updateGame() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  zombies.forEach(z => {
    z.move();
    z.draw();
  });

  humans.forEach(h => {
    h.move();
    h.draw();
  });

  particles.forEach((p, i) => {
    p.update();
    p.draw();
    if (p.life <= 0) particles.splice(i, 1);
  });

  // Update the points display
  killCounterElement.textContent = `Points: ${points}`;

  requestAnimationFrame(updateGame);
}

canvas.addEventListener("click", (e) => {
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  // Check if a zombie is hit
  zombies.forEach((z, i) => {
    if (z.isHit(mx, my)) {
      zombies.splice(i, 1);
      points++; // Increment points for killing a zombie
      // Create blood splatter effect
      for (let j = 0; j < 30; j++) {
        particles.push(new BloodParticle(z.x, z.y));
      }
      // Respawn a new zombie after a short delay
      setTimeout(() => {
        spawnZombie();
      }, 1000); // 1 second delay before respawn
    }
  });

  // Check if a human is hit
  humans.forEach((h, i) => {
    if (h.isHit(mx, my)) {
      humans.splice(i, 1);
      points -= 5; // Deduct points for hitting a human
      // Respawn a new human after a short delay
      setTimeout(() => {
        spawnHuman();
      }, 1000); // 1 second delay before respawn
    }
  });
});

// Initial spawn
for (let i = 0; i < 5; i++) spawnZombie();
for (let i = 0; i < 2; i++) spawnHuman(); // Start with 2 humans
updateGame();
</script>
</body>
</html>
