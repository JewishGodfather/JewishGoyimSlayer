<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shooting Zombie Humans</title>
  <style>
    canvas {
      background-image: url('background.jpg');
      background-size: cover;
      display: block;
      margin: 0 auto;
    }
    body {
      margin: 0;
      padding: 0;
      display: flex;
    }
    .kill-counter {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-size: 30px;
      font-family: Arial, sans-serif;
      z-index: 10;
    }
    .sidebar {
      position: fixed;
      top: 0;
      right: 0;
      width: 250px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .sidebar h2 {
      margin-top: 0;
    }
    .leaderboard {
      list-style-type: none;
      padding: 0;
    }
    .leaderboard li {
      margin: 10px 0;
    }
    .input-container {
      margin-top: 20px;
    }
    .input-container input {
      padding: 10px;
      font-size: 16px;
      margin-right: 10px;
    }
    .input-container button {
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="kill-counter">Points: 0</div>
  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <div class="sidebar">
    <h2>Leaderboard</h2>
    <ul class="leaderboard"></ul>
    <div class="input-container">
      <input type="text" id="playerName" placeholder="Enter your name" />
      <button id="submitName">Submit Name</button>
    </div>
  </div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const killCounterElement = document.querySelector(".kill-counter");
const leaderboardElement = document.querySelector(".leaderboard");
const playerNameInput = document.getElementById("playerName");
const submitNameButton = document.getElementById("submitName");

let zombies = [];
let humans = [];
let particles = [];
let points = 0;
let playerName = "Player";
let leaderboard = [];

class Zombie {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.size = 50;
    this.speed = 0.5 + Math.random() * 0.5;
    this.direction = Math.random() * Math.PI * 2;
    this.health = 100;
  }

  move() {
    this.x += Math.cos(this.direction) * this.speed;
    this.y += Math.sin(this.direction) * this.speed;

    if (this.x < 50 || this.x > canvas.width - 50) this.direction = Math.PI - this.direction;
    if (this.y < 50 || this.y > canvas.height - 150) this.direction = -this.direction;
  }

  draw() {
    ctx.fillStyle = "#5C4033"; // Zombie skin color
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size / 2, 0, Math.PI * 2);
    ctx.fill();

    // Draw zombie face and body
    ctx.fillStyle = "green"; // Eyes (to give them an eerie effect)
    ctx.beginPath();
    ctx.arc(this.x - 10, this.y - 10, 5, 0, Math.PI * 2);
    ctx.arc(this.x + 10, this.y - 10, 5, 0, Math.PI * 2);
    ctx.fill();

    // Body
    ctx.fillStyle = "#5C4033"; // Zombie color for clothing
    ctx.fillRect(this.x - 15, this.y + 20, 30, 50); // Body
  }

  isHit(x, y) {
    return Math.hypot(this.x - x, this.y - y) < this.size / 2;
  }
}

class Human {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.size = 50;
  }

  move() {
    this.x += Math.random() * 4 - 2;
    this.y += Math.random() * 4 - 2;
  }

  draw() {
    // Drawing the head
    ctx.fillStyle = "#FFDDC1"; // Human skin color
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size / 2, 0, Math.PI * 2); // Head
    ctx.fill();

    // Draw body
    ctx.fillStyle = "#2C3E50"; // Clothing color
    ctx.fillRect(this.x - 15, this.y + 20, 30, 40); // Body

    // Arms
    ctx.fillStyle = "#FFDDC1"; // Skin color for arms
    ctx.fillRect(this.x - 25, this.y + 10, 10, 30); // Left arm
    ctx.fillRect(this.x + 15, this.y + 10, 10, 30); // Right arm

    // Legs
    ctx.fillStyle = "#34495E"; // Pants color
    ctx.fillRect(this.x - 15, this.y + 60, 10, 30); // Left leg
    ctx.fillRect(this.x + 5, this.y + 60, 10, 30); // Right leg
  }

  isHit(x, y) {
    return Math.hypot(this.x - x, this.y - y) < this.size / 2;
  }
}

class BloodParticle {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.vx = Math.random() * 6 - 3;  // Random horizontal speed
    this.vy = Math.random() * 6 - 3;  // Random vertical speed
    this.life = 20; // Blood particle life duration
    this.size = Math.random() * 3 + 2; // Random size for more natural look
    this.color = "red"; // Blood color
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.life--; // Decrease life over time
  }

  draw() {
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
  }
}

function spawnZombie() {
  const x = 100 + Math.random() * (canvas.width - 200);
  const y = 100 + Math.random() * (canvas.height - 200);
  zombies.push(new Zombie(x, y));
}

function spawnHuman() {
  const x = 100 + Math.random() * (canvas.width - 200);
  const y = 100 + Math.random() * (canvas.height - 200);
  humans.push(new Human(x, y));
}

function updateGame() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  zombies.forEach(z => {
    z.move();
    z.draw();
  });

  humans.forEach(h => {
    h.move();
    h.draw();
  });

  particles.forEach((p, i) => {
    p.update();
    p.draw();
    if (p.life <= 0) particles.splice(i, 1);
  });

  killCounterElement.textContent = `Points: ${points}`;

  requestAnimationFrame(updateGame);
}

// Submit player name and update leaderboard
submitNameButton.addEventListener("click", () => {
  playerName = playerNameInput.value.trim() || "Player";
  updateLeaderboard();
});

// Update leaderboard
function updateLeaderboard() {
  leaderboard.push({ name: playerName, score: points });
  leaderboard.sort((a, b) => b.score - a.score);

  leaderboardElement.innerHTML = "";
  leaderboard.slice(0, 5).forEach((entry) => {
    const li = document.createElement("li");
    li.textContent = `${entry.name}: ${entry.score} Points`;
    leaderboardElement.appendChild(li);
  });
}

// Add a click event to the canvas
canvas.addEventListener('click', (event) => {
  const x = event.offsetX;
  const y = event.offsetY;

  zombies.forEach((zombie) => {
    if (zombie.isHit(x, y)) {
      points += 1;
      particles.push(new BloodParticle(zombie.x, zombie.y)); // Blood effect
      zombies = zombies.filter((z) => z !== zombie); // Remove the hit zombie
      setTimeout(() => spawnZombie(), 2000); // Respawn a new zombie after 2 seconds
    }
  });

  humans.forEach((human) => {
    if (human.isHit(x, y)) {
      points -= 5;
      humans = humans.filter((h) => h !== human); // Remove the hit human
    }
  });
});

// Initialize game
for (let i = 0; i < 5; i++) spawnZombie();
for (let i = 0; i < 2; i++) spawnHuman(); // Start with 2 humans
updateGame();
</script>
</body>
</html>
